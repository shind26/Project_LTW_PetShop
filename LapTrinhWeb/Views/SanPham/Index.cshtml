@model List<tblSanPham>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutBH.cshtml";

    // Lấy danh sách từ ViewBag
    var pets = ViewBag.Pets as List<tblSanPham>;
    var accessories = ViewBag.Accessories as List<tblSanPham>;
}

<section class="products">
    <!-- Phần Thú cưng - CHỈ HIỆN KHI CÓ SẢN PHẨM -->
    @if (pets != null && pets.Any())
    {
        <div class="category-section">
            <h2 class="category-title">🐾 Thú cưng</h2>
            <div class="product-grid">
                @foreach (var sp in pets)
                {
                    <article class="product-card">
                        <a href="@Url.Action("ChiTiet", "CTSanPham", new {masp=sp.MaSP})" style="text-decoration:none">
                            <div class="thumb">
                                <img src="~/Content/HinhAnh/@sp.AnhDaiDien" alt="@sp.TenSP" />
                            </div>
                            <h4 class="title">@sp.TenSP</h4>
                            <p class="price">
                                <span class="new-price">@string.Format("{0:#,##0} đ", @sp.GiaBan)</span>
                            </p>
                        </a>
                        <button class="btn btn-primary">Thêm vào giỏ</button>
                    </article>
                }
            </div>
        </div>
    }

    <!-- Phần Phụ kiện - CHỈ HIỆN KHI CÓ SẢN PHẨM -->
    @if (accessories != null && accessories.Any())
    {
        <div class="category-section">
            <h2 class="category-title">🛍️ Phụ kiện</h2>
            <div class="product-grid">
                @foreach (var sp in accessories)
                {
                    <article class="product-card">
                        <a href="@Url.Action("ChiTiet", "CTSanPham", new {masp=sp.MaSP})" style="text-decoration:none">
                            <div class="thumb">
                                <img src="~/Content/HinhAnh/@sp.AnhDaiDien" alt="@sp.TenSP" />
                            </div>
                            <h4 class="title">@sp.TenSP</h4>
                            <p class="price">
                                <span class="new-price">@string.Format("{0:#,##0} đ", @sp.GiaBan)</span>
                            </p>
                        </a>
                        <button class="btn btn-primary">Thêm vào giỏ</button>
                    </article>
                }
            </div>
        </div>
    }

    <!-- Thông báo khi không có sản phẩm nào -->
    @if ((pets == null || !pets.Any()) && (accessories == null || !accessories.Any()))
    {
        <div class="alert alert-warning text-center py-5">
            <div class="mb-3">
                <i class="fas fa-search fa-3x text-muted"></i>
            </div>
            <h4>Không tìm thấy sản phẩm nào</h4>
            <p class="mb-3">Hãy thử tìm kiếm với từ khóa khác hoặc xem danh mục khác.</p>
            <a href="@Url.Action("Index")" class="btn btn-primary">Xem tất cả sản phẩm</a>
        </div>
    }
</section>

<style>
    .category-section {
        margin-bottom: 40px;
        padding: 20px;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        background-color: #f9f9f9;
    }

    .category-title {
        color: #2c3e50;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
        margin-bottom: 20px;
        font-size: 1.5em;
    }

    /* Giữ nguyên style hiện tại của product-grid và product-card */
    .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .product-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        background: white;
        transition: transform 0.3s ease;
    }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

    .thumb img {
        max-width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 5px;
    }

    .title {
        margin: 10px 0;
        color: #333;
        font-size: 1.1em;
        height: 50px;
        overflow: hidden;
    }

    .price {
        margin: 10px 0;
    }

    .new-price {
        color: #e74c3c;
        font-weight: bold;
        font-size: 1.2em;
    }

    .btn-primary {
        background-color: #3498db;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        color: white;
        cursor: pointer;
        width: 100%;
    }

        .btn-primary:hover {
            background-color: #2980b9;
        }

    /* Style cho thông báo không có sản phẩm */
    .alert-warning {
        border-radius: 10px;
        border: 1px solid #ffeaa7;
    }
</style>