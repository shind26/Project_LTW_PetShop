@model tblSanPham

@{
    ViewBag.Title = "Cập nhật sản phẩm";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Cập nhật sản phẩm: @Model.TenSP</h6>
    </div>
    <div class="card-body">
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()
            @Html.HiddenFor(model => model.MaSP)

            <div class="form-horizontal">
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <div class="row">
                    <div class="col-md-6">
                        <h5 class="text-gray-800">Thông tin cơ bản</h5>
                        <div class="form-group">
                            <label>Tên sản phẩm</label>
                            @Html.EditorFor(model => model.TenSP, new { htmlAttributes = new { @class = "form-control" } })
                        </div>

                        <div class="form-group">
                            <label>Loại sản phẩm</label>
                            @Html.DropDownListFor(model => model.LoaiSanPham, new List<SelectListItem> {
                                new SelectListItem { Text = "Phụ kiện / Thức ăn", Value = "Accessory" },
                                new SelectListItem { Text = "Thú cưng", Value = "Pet" }
                            }, new { @class = "form-control", id = "LoaiSanPham", onchange = "togglePetFields()" })
                        </div>

                        <div class="form-group">
                            <label>Danh mục</label>
                            @Html.DropDownList("MaDanhMuc", null, htmlAttributes: new { @class = "form-control" })
                        </div>

                        <div class="form-group">
                            <label>Nhà cung cấp</label>
                            @Html.DropDownList("MaNCC", null, htmlAttributes: new { @class = "form-control" })
                        </div>

                        <div class="form-group">
                            <label>Giá bán</label>
                            @Html.EditorFor(model => model.GiaBan, new { htmlAttributes = new { @class = "form-control" } })
                        </div>
                        <div class="form-group">
                            <label>Ảnh đại diện</label>
                            @Html.EditorFor(model => model.AnhDaiDien, new { htmlAttributes = new { @class = "form-control" } })
                            @if (!string.IsNullOrEmpty(Model.AnhDaiDien))
                            {
                                <div class="mt-2">
                                    <img src="~/Content/Images/@Model.AnhDaiDien" width="100" />
                                </div>
                            }
                        </div>
                        <div class="form-group">
                            <label>Mô tả</label>
                            @Html.TextAreaFor(model => model.MoTa, new { @class = "form-control", rows = 3 })
                        </div>
                    </div>

                    <div class="col-md-6" id="pet-fields">
                        <h5 class="text-info"><i class="fas fa-paw"></i> Thông tin Thú cưng</h5>
                        <div class="form-group">
                            <label>Giới tính</label>
                            @Html.DropDownListFor(model => model.GioiTinh, new List<SelectListItem> {
                               new SelectListItem { Text = "Đực", Value = "Đực" },
                               new SelectListItem { Text = "Cái", Value = "Cái" }
                           }, "---", new { @class = "form-control" })
                        </div>
                        <div class="form-group">
                            <label>Ngày sinh</label>
                            @Html.TextBoxFor(model => model.NgaySinh, "{0:yyyy-MM-dd}", new { @class = "form-control", type = "date" })
                        </div>
                        <div class="form-group">
                            <label>Màu sắc</label>
                            @Html.EditorFor(model => model.MauSac, new { htmlAttributes = new { @class = "form-control" } })
                        </div>
                        <div class="form-group">
                            <label>Sức khỏe</label>
                            @Html.EditorFor(model => model.TinhTrangSucKhoe, new { htmlAttributes = new { @class = "form-control" } })
                        </div>
                        <div class="form-group">
                            <label>Tiền sử bệnh</label>
                            @Html.EditorFor(model => model.TienSuBenh, new { htmlAttributes = new { @class = "form-control" } })
                        </div>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <input type="submit" value="Lưu thay đổi" class="btn btn-primary" />
                    <a href="@Url.Action("SanPham")" class="btn btn-secondary">Hủy</a>
                </div>
            </div>
        }
    </div>
</div>

@section Scripts {
    <script>
        function togglePetFields() {
            var type = $('#LoaiSanPham').val();
            if (type === 'Pet') {
                $('#pet-fields').show();
            } else {
                $('#pet-fields').hide();
            }
        }
        $(document).ready(function () {
            togglePetFields();
        });
    </script>
}